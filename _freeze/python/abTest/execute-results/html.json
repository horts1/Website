{
  "hash": "6912464158aa05e13abde31565c952fe",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: \"Shady Business: Testing the Power of Dark mode\"\nformat:\n  html:\n    code-fold: true\njupyter: python3\n---\n\n::: {#1497b46c .cell execution_count=1}\n``` {.python .cell-code}\nimport pandas as pd\nimport os\nos.getcwd()\ndf = pd.read_csv(\n    'c:\\\\Users\\\\HoraceTsai\\\\Documents\\\\data\\\\ab_testing.csv'\n)\ndf.head()\n```\n\n::: {.cell-output .cell-output-display execution_count=1}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>User ID</th>\n      <th>Group</th>\n      <th>Page Views</th>\n      <th>Time Spent</th>\n      <th>Conversion</th>\n      <th>Device</th>\n      <th>Location</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>14292</td>\n      <td>B</td>\n      <td>3</td>\n      <td>424</td>\n      <td>No</td>\n      <td>Mobile</td>\n      <td>Northern Ireland</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>11682</td>\n      <td>A</td>\n      <td>9</td>\n      <td>342</td>\n      <td>No</td>\n      <td>Mobile</td>\n      <td>Scotland</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>19825</td>\n      <td>A</td>\n      <td>2</td>\n      <td>396</td>\n      <td>No</td>\n      <td>Desktop</td>\n      <td>Northern Ireland</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>16080</td>\n      <td>B</td>\n      <td>4</td>\n      <td>318</td>\n      <td>No</td>\n      <td>Desktop</td>\n      <td>Wales</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>18851</td>\n      <td>A</td>\n      <td>1</td>\n      <td>338</td>\n      <td>Yes</td>\n      <td>Desktop</td>\n      <td>Scotland</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\n## Exploratory Data Analysis\n\n::: {#0b708c4a .cell execution_count=2}\n``` {.python .cell-code}\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport scipy.stats as stats\n\nsummary_stats = df.groupby(\"Group\")[\"Time Spent\"].describe()\nsummary_stats\n\n#plot \nplt.figure(figsize=(10,6))\nsns.boxplot(\n    x = \"Group\",\n    y = \"Time Spent\",\n    data = df,\n    order = [\"A\", \"B\"],\n    palette = \"Accent\"\n)\nplt.title(\"Distribution of Time Spent by Group\")\nplt.xlabel(\"Group\")\nplt.ylabel(\"Time Spent (seconds)\")\nplt.grid(False)\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](abTest_files/figure-html/cell-3-output-1.png){width=816 height=523}\n:::\n:::\n\n\n::: {#41b3845c .cell execution_count=3}\n``` {.python .cell-code}\n#plot \nplt.figure(figsize=(10,6))\nsns.histplot(\n    df,\n    x = \"Time Spent\",\n    hue = \"Group\",\n    kde = True,\n    bins = 30,\n    palette = \"Accent\",\n    alpha = 0.6,\n)\nplt.title(\"Distribution of Time Spent by Group\")\nplt.xlabel(\"Group\")\nplt.ylabel(\"Frequency\")\nplt.legend(title=\"Group\", \n    labels=[\"A (White Background)\", \"B (Black Background)\"], \n    loc='upper left',\n    bbox_to_anchor=(1, 1)\n    )\nplt.grid(False)\nplt.show()\n# fairly similar distribution\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nC:\\Users\\HoraceTsai\\anaconda3\\Lib\\site-packages\\seaborn\\_oldcore.py:1119: FutureWarning:\n\nuse_inf_as_na option is deprecated and will be removed in a future version. Convert inf values to NaN before operating instead.\n\n```\n:::\n\n::: {.cell-output .cell-output-display}\n![](abTest_files/figure-html/cell-4-output-2.png){width=1017 height=523}\n:::\n:::\n\n\n::: {#4c9a80ca .cell execution_count=4}\n``` {.python .cell-code}\ngroup_A = df[df[\"Group\"] == \"A\"][\"Time Spent\"]\ngroup_B = df[df[\"Group\"] == \"B\"][\"Time Spent\"]\n\nt_stat, p_val = stats.ttest_ind(\n    group_A, \n    group_B,\n    equal_var = False\n    )\n\nprint(t_stat, p_val)\n# small t- stat meaning group a (white) has a slightly higher mean of time spent vs group B\n# however difference between the two gorups is not large compared to the variability of the data\n# therefore no signif diff between background colors \n# changing website background does not meaningfully affect how long users stay\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n-0.4694926489675219 0.6387380383087231\n```\n:::\n:::\n\n\n::: {#8b1b88be .cell execution_count=5}\n``` {.python .cell-code}\n# Convert Conversion column to binary (Yes = 1, No = 0)\ndf[\"Conversion\"] = df[\"Conversion\"].map({\"Yes\": 1, \"No\": 0})\n\ndf.head()\n```\n\n::: {.cell-output .cell-output-display execution_count=5}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>User ID</th>\n      <th>Group</th>\n      <th>Page Views</th>\n      <th>Time Spent</th>\n      <th>Conversion</th>\n      <th>Device</th>\n      <th>Location</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>14292</td>\n      <td>B</td>\n      <td>3</td>\n      <td>424</td>\n      <td>0</td>\n      <td>Mobile</td>\n      <td>Northern Ireland</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>11682</td>\n      <td>A</td>\n      <td>9</td>\n      <td>342</td>\n      <td>0</td>\n      <td>Mobile</td>\n      <td>Scotland</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>19825</td>\n      <td>A</td>\n      <td>2</td>\n      <td>396</td>\n      <td>0</td>\n      <td>Desktop</td>\n      <td>Northern Ireland</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>16080</td>\n      <td>B</td>\n      <td>4</td>\n      <td>318</td>\n      <td>0</td>\n      <td>Desktop</td>\n      <td>Wales</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>18851</td>\n      <td>A</td>\n      <td>1</td>\n      <td>338</td>\n      <td>1</td>\n      <td>Desktop</td>\n      <td>Scotland</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\n::: {#1764cc71 .cell execution_count=6}\n``` {.python .cell-code}\n# Calculate conversion rates for each group\nconversion_rates = df.groupby(\"Group\")[\"Conversion\"].mean().reset_index()\n\n# bar plot for conversion rates\nplt.figure(figsize =(8,5))\nsns.barplot(\n    x = \"Group\",\n    y = \"Conversion\",\n    data = conversion_rates,\n    palette = \"Accent\"\n)\n\n# Add annotations\nfor index, row in conversion_rates.iterrows():\n    plt.text(index, row[\"Conversion\"] + 0.01, f\"{row['Conversion']*100:.2f}%\", ha='center', fontsize=12)\n\n# Formatting the plot\nplt.title(\"Conversion Rate by Group (A vs. B)\")\nplt.xlabel(\"Group\")\nplt.ylabel(\"Conversion Rate\")\nplt.ylim(0, 1)  # Ensuring y-axis goes from 0 to 1 (100% scale)\nplt.grid(axis='y', linestyle='--', alpha=0.7)\n\n# Show the plot\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](abTest_files/figure-html/cell-7-output-1.png){width=663 height=449}\n:::\n:::\n\n\n::: {#4175178e .cell execution_count=7}\n``` {.python .cell-code}\n# Perform a chi-square test for conversion rates\ncontingency_table = pd.crosstab(df[\"Group\"], df[\"Conversion\"])\nchi2_stat, p_value, dof, expected = stats.chi2_contingency(contingency_table)\n\n# Display conversion rates and test results\nchi2_stat, p_value\n```\n\n::: {.cell-output .cell-output-display execution_count=7}\n```\n(106.22812337440538, 6.571736018334222e-25)\n```\n:::\n:::\n\n\n",
    "supporting": [
      "abTest_files"
    ],
    "filters": [],
    "includes": {
      "include-in-header": [
        "<script src=\"https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js\" integrity=\"sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==\" crossorigin=\"anonymous\"></script>\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js\" integrity=\"sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==\" crossorigin=\"anonymous\" data-relocate-top=\"true\"></script>\n<script type=\"application/javascript\">define('jquery', [],function() {return window.jQuery;})</script>\n"
      ]
    }
  }
}